<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="utf-8">
		<title>Параметры в роутах в MVC на PHP | Трепачёв Дмитрий</title>
		
		<link rel="stylesheet" href="../../../../../../css/fonts/list.css?v=8">
		<link rel="stylesheet" href="../../../../../../css/styles.css?v=321">
		<link rel="stylesheet" href="../../../../../../js/highlighter/highlighter.css?v=77">
		
		<script src="../../../../../../js/highlighter/highlighter.js?v=112"></script>
		
		<script src="../../../../../../js/location.js?v=3"></script>
		<script src="../../../../../../js/locale.js?v=5"></script>
		<script src="../../../../../../js/main.js?v=129"></script>
		
		<meta name="yandex-verification" content="00eb45b7559e5c68">
		<meta name="google-site-verification" content="Af0TM2OrwIEtjoQXxYz2-1C-21E1m7DB23_kWpE9sLg">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<meta name="description" content="В данном уроке мы с вами разберем  в ООП на PHP.">
		<link rel="shortcut icon" type="image/x-icon" href="../../../../../../favicon.ico">
	</head>
	<body id="top">
		<div class="wrapper">
			<header>
				<div class="top">
	<div class="left"><img data-module="coder" src="" alt=""></div>
	<div class="right">
		offline version 0.0.1	</div>
	<div class="center">
			<a href="http://mentor.code.mu">
		Запись на курсы по HTML, CSS, JavaScript, PHP, фреймворкам и CMS,<br>
		<b>а также</b>: помощь в поиске работы и заказов, стажировка
		на реальных проектах&rarr;
	</a>
	</div>
</div>								<nav data-module="mainmenu">
	<section class="main active">
		<span data-href="/ru/markup/" data-open="markup">Верстка</span>
		<span data-href="/ru/javascript/" data-open="javascript">JavaScript</span>
		<span data-href="/ru/php/" data-open="php">PHP</span>
		<span data-href="/ru/javascript/typescript/" data-open="typescript">TypeScript</span>
		<span data-href="/ru/javascript/nodejs/" data-open="nodejs">NodeJS</span>
		<span data-href="/ru/sql/" data-open="sql">SQL</span>
		<span data-href="/ru/javascript/framework/vue/" data-open="vue">Vue</span>
		<span data-href="/ru/javascript/framework/react/" data-open="react">React</span>
		<span data-href="/ru/php/framework/laravel/" data-open="laravel">Laravel</span>
	</section>

	<section class="sub" data-name="markup">
		<a href="../../../../../../ru/markup/book/prime.html">Основной учебник</a>
		<a href="../../../../../../ru/markup/book/supreme.html">Высший учебник</a>
		<a href="../../../../../../ru/markup/book/prep/less.html">Учебник LESS</a>
		<a href="../../../../../../ru/markup/manual/html.html">Справочник HTML</a>
		<a href="../../../../../../ru/markup/manual/css.html">Справочник CSS</a>
	</section>

	<section class="sub" data-name="php">
		<a href="../../../../../../ru/php/book/prime.html">Основной учебник</a>
		<a href="../../../../../../ru/php/book/oop.html">Учебник ООП и MVC</a>
		<a href="../../../../../../ru/php/manual.html">Справочник</a>
		<a href="../../../../../../ru/php/video/lesson.html">Видеоуроки</a>
	</section>

	<section class="sub" data-name="javascript">
		<a href="../../../../../../ru/javascript/book/prime.html">Основной учебник</a>
		<a href="../../../../../../ru/javascript/book/practice.html">Учебник практики</a>
		<a href="../../../../../../ru/javascript/book/supreme.html">Высший учебник</a>
		<a href="../../../../../../ru/javascript/book/oop.html">Учебник ООП</a>
		<a href="../../../../../../ru/javascript/manual.html">Справочник</a>
		<a href="../../../../../../ru/javascript/video/lesson.html">Видеоуроки</a>
		<a href="../../../../../../ru/javascript/mistake.html">Ошибки</a>
		<a href="../../../../../../ru/javascript/faq.html">FAQ</a>
	</section>

	<section class="sub" data-name="nodejs">
		<a href="../../../../../../ru/javascript/nodejs/book/prime.html">Основной учебник</a>
		<a href="../../../../../../ru/javascript/nodejs/book/express.html">Express</a>
		<a href="../../../../../../ru/javascript/nodejs/book/mongo.html">Mongo</a>
	</section>
	<section class="sub" data-name="sql">
		<a href="../../../../../../ru/sql/manual.html">Справочник</a>
	</section>

	<section class="sub" data-name="typescript">
		<a href="../../../../../../ru/javascript/typescript/book/prime.html">Основной учебник</a>
	</section>

	<section class="sub" data-name="vue">
		<a href="../../../../../../ru/javascript/framework/vue/book/prime.html">Основной учебник</a>
	</section>

	<section class="sub" data-name="react">
		<a href="../../../../../../ru/javascript/framework/react/book/prime.html">Основной учебник</a>
	</section>

	<section class="sub" data-name="laravel">
		<a href="../../../../../../ru/php/framework/laravel/book/prime.html">Основной учебник</a>
	</section>
	<!--
	<section class="sub" data-name="wordpress">
		<a href="http://dep.code.mu/ru/cms/wordpress/book/prime/administration/">Учебник администратора</a>
		<a href="http://dep.code.mu/ru/cms/wordpress/book/prime/development/">Учебник разработчика</a>
		<!--
		<a href="../../../../../../ru/cms/wordpress/book/prime/administration.html">Учебник администратора</a>
		<a href="../../../../../../ru/cms/wordpress/book/prime/development.html">Учебник разработчика</a>
		
	</section>
	-->
</nav>							</header>
			<main>
				<h1>Параметры в роутах в MVC на PHP</h1>
				<div class="content">
<p>
	В предыдущем уроке наши роуты имели фиксированные
	адреса. На самом деле механизм роутинга более
	сложный - можно сделать так, чтобы часть
	URI страницы попадала в именованные параметры,
	доступные затем в контроллере.
</p>
<p>
	Пусть, к примеру, наши адреса будут выглядеть
	вот так: <code class="path inline">/test/параметр1/параметр2/</code>,
	где параметр1 и параметр2 - произвольные
	строки. При этом мы хотим, чтобы адреса такого
	вида обрабатывались одним действием контроллера.
	Для этого следует придумать имя параметра
	и перед ним поставить двоеточие, вот так:
</p>
<div class="block" data-file="/project/config/routes.php">
	<code class="highlight" data-module="highlight" data-lang="php">&lt;?php
	use \Core\Route;
	
	return [
		new Route('/test/:var1/:var2/', 'page', 'act'),
	];
?&gt;</code>
</div>
<p>
	В нашем случае получится, что все запросы
	вида <code class="path inline">/test/параметр1/параметр2/</code>
	будут попадать на действие <code class="code inline">act</code>. При
	этом в первый параметр этого действия будет
	попадать ассоциативный массив с параметрами:
	текст, который будет на месте первого параметра,
	попадает в элемент массива с ключом <code class="string inline">'var1'</code>,
	а текст второго параметра - в <code class="string inline">'var2'</code>.
</p>
<p>
	Пусть, к примеру, в адресной строке набрано
	следующее: <code class="path inline">/test/eee/bbb/</code>. Давайте
	посмотрим, что будет содержать первый параметр
	действия:
</p>
<div class="block" data-file="project/controllers/PageController.php">
	<code class="highlight" data-module="highlight" data-lang="php">&lt;?php
	namespace Project\Controllers;
	use Core\Controller;
	
	class PageController extends Controller
	{
		public function act($params)
		{
			var_dump($params); // ['var1' =&gt; 'eee', 'var2' =&gt; 'bbb']
		}
	}
?&gt;</code>
</div>
<div class="task">
	<p>
		Сделайте контроллер <code class="code inline">NumController</code>,
		а в нем - действие <code class="code inline">sum</code>. Пусть это
		действие обрабатывает адреса следующего вида:
		<code class="path inline">/nums/:n1/:n2/:n3/</code>, где параметрами
		будут некоторые числа. Сделайте так, чтобы
		на экран выводилась сумма переданных чисел.
	</p>
</div>

<h2>Применение</h2>
<p>
	Давайте посмотрим применение описанного на
	более жизненном примере. Пусть наш контроллер
	<code class="code inline">PageController</code> содержит массив страниц
	(эти данные должна отдавать модель, но с
	моделями мы еще не разобрались, поэтому пусть
	данные пока просто хранятся в контроллере):
</p>
<div class="block" data-file="project/controllers/PageController.php">
	<code class="highlight" data-module="highlight" data-lang="php">&lt;?php
	namespace Project\Controllers;
	use Core\Controller;
	
	class PageController extends Controller
	{
		private $pages;
		
		public function __construct()
		{
			$this-&gt;pages = [
				1 =&gt; 'страница 1',
				2 =&gt; 'страница 2',
				3 =&gt; 'страница 3',
			];
		}
	}
?&gt;</code>
</div>
<p>
	Давайте сделаем действие <code class="code inline">show</code>, которое
	будет выводить на экран страницу с определенным
	номером (<code class="string inline">id</code>):
</p>
<div class="block" data-file="project/controllers/PageController.php">
	<code class="highlight" data-module="highlight" data-lang="php">&lt;?php
	namespace Project\Controllers;
	use Core\Controller;
	
	class PageController extends Controller
	{
		private $pages;
		
		public function __construct()
		{
			$this-&gt;pages = [
				1 =&gt; 'страница 1',
				2 =&gt; 'страница 2',
				3 =&gt; 'страница 3',
			];
		}
		
		public function show()
		{
			// здесь выведем страницу с определенным номером
		}
	}
?&gt;</code>
</div>
<p>
	Пусть при обращении к адресу <code class="path inline">/page/1/</code>
	будет выводится текст первой страницы, при
	обращении к адресу <code class="path inline">/page/2/</code> -
	текст второй страницы и так далее. Сделаем
	соответствующий роут:
</p>
<div class="block" data-file="/project/config/routes.php">
	<code class="highlight" data-module="highlight" data-lang="php">&lt;?php
	use \Core\Route;
	
	return [
		new Route('/page/:id/', 'page', 'show'),
	];
?&gt;</code>
</div>
<p>
	Реализуем описанный метод <code class="code inline">show</code>:
</p>
<div class="block" data-file="project/controllers/PageController.php">
	<code class="highlight" data-module="highlight" data-lang="php">&lt;?php
	namespace Project\Controllers;
	use Core\Controller;
	
	class PageController extends Controller
	{
		private $pages;
		
		public function __construct()
		{
			$this-&gt;pages = [
				1 =&gt; 'страница 1',
				2 =&gt; 'страница 2',
				3 =&gt; 'страница 3',
			];
		}
		
		public function show($params)
		{
			echo $this-&gt;pages[ $params['id'] ]; // выводим страницу по номеру
		}
	}
?&gt;</code>
</div>
<div class="task">
	<p>
		Реализуйте контроллер <code class="code inline">UserController</code>,
		содержащий следующий массив:
	</p>
	<div class="block">
		<code class="highlight" data-module="highlight" data-lang="php">&lt;?php
	$this-&gt;users = [
		1 =&gt; ['name'=&gt;'user1', 'age'=&gt;'23', 'salary' =&gt; 1000],
		2 =&gt; ['name'=&gt;'user2', 'age'=&gt;'24', 'salary' =&gt; 2000],
		3 =&gt; ['name'=&gt;'user3', 'age'=&gt;'25', 'salary' =&gt; 3000],
		4 =&gt; ['name'=&gt;'user4', 'age'=&gt;'26', 'salary' =&gt; 4000],
		5 =&gt; ['name'=&gt;'user5', 'age'=&gt;'27', 'salary' =&gt; 5000],
	];
?&gt;</code>
	</div>
</div>
<div class="task">
	<p>
		В контроллере <code class="code inline">UserController</code>, сделайте
		действие <code class="code inline">show</code>, которое будет выводить
		юзера по определенному <code class="string inline">id</code>. Пусть оно
		будет доступно по адресу следующего вида:
		<code class="path inline">/user/:id/</code>.
	</p>
</div>
<div class="task">
	<p>
		В контроллере <code class="code inline">UserController</code>, сделайте
		действие <code class="code inline">info</code>, которое будет выводить
		имя или возраст заданного юзера. Пусть это
		действие будет доступно по адресу следующего
		вида: <code class="path inline">/user/:id/:key/</code>, где <code class="path inline">key</code>
		будет иметь значение <code class="string inline">'name'</code>, <code class="string inline">'age'</code>
		или <code class="string inline">'salary'</code>.
	</p>
</div>
<div class="task">
	<p>
		В контроллере <code class="code inline">UserController</code>, сделайте
		действие <code class="code inline">all</code>, которое будет выводить
		список всех юзеров на экран. Пусть это действие
		будет доступно по адресу следующего вида:
		<code class="path inline">/user/all/</code> (параметров тут никаких
		не будет).
	</p>
</div>
<div class="task">
	<p>
		В контроллере <code class="code inline">UserController</code>, сделайте
		действие <code class="code inline">first</code>, которое будет выводить
		список N первых юзеров на экран. Пусть это
		действие будет доступно по адресу следующего
		вида: <code class="path inline">/user/first/:n/</code>, где в параметре
		будет количество юзеров, которые следует
		вывести на экран.
	</p>
</div>
</div>			</main>
			<div class="bottom">
	<section class="pages" data-url="/ru/php/book/oop/" data-persent="87" data-hash="ppOpUFmRP" data-quantity="107" data-num="94"><a href="../../../../../../ru/php/book/oop/mvc/using/controllers-actions-routes.html" class="prev"><span class="arrow">&larr;</span></a><a href="../../../../../../ru/php/book/oop/mvc/using/views.html" class="next"><span class="arrow">&rarr;</span></a></section></div>			<footer>
	<div class="contacts">
	Трепачёв Дмитрий &copy; 2012-2022 <br>
	<a href="https://t.me/trepachev_dmitry">t.me/trepachev_dmitry</a>
</div>		
</footer>			<div class="jump">
	<a href="#top" class="to-top">&uarr;</a>
</div>			<div class="langer">
	</div>			</div>
		</div>
		
		<script src="../../../../../../js/metrika.js?v=1"></script>	</body>
</html>